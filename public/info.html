<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>BUNCA HACCP ¬∑ Anleitung</title>
  <!-- use the same stylesheet as Historie -->
  <link rel="stylesheet" href="./css/style.css" />
  <style>
    /* Page-only helpers (do not affect other pages) */
    .row{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:12px}
    .muted{color:#6b7280}
    .toolbar{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
    .toolbar .spacer{flex:1}

    /* Print */
    @media print{
      .header,.footer,.print-hide{display:none!important}
      .container{max-width:100%!important;padding:0!important}
      .panel{box-shadow:none!important;border:1px solid #ddd!important}
      body{background:#fff}
    }
    /* Compact print (reduces spacing and text size a bit) */
    .print-compact .panel{padding:10px}
    .print-compact h2{margin:8px 0;font-size:18px}
    .print-compact h3{margin:6px 0;font-size:16px}
    .print-compact h4{margin:6px 0;font-size:14px}
    .print-compact li{margin:2px 0}
  </style>
</head>
<body>

<!-- SAME HEADER/NAV AS HISTORIE -->
<header class="header">
  <div class="nav">
    <a class="brand" href="index.html"><span>üõ°Ô∏è BUNCA HACCP</span></a>
    <div class="fill"></div>
    <select class="select" data-shop-select aria-label="Shop w√§hlen"></select>
    <a data-nav href="index.html">√úbersicht</a>
    <a data-nav href="historie.html">Historie</a>
    <a data-nav href="info.html">Anleitung</a>
    <a data-nav href="admin.html">Admin</a>
    <a href="#" class="btn" data-logout>Abmelden</a>
  </div>
</header>

<main class="container">
  <div class="toolbar print-hide" style="margin-bottom:10px">
    <h2 class="h" style="margin:0">Anleitung &amp; Soforthilfe</h2>
    <div class="spacer"></div>
    <strong>Shop:</strong>
    <span id="shopName" class="badge"></span>
    <button id="btnCompactPrint" class="btn">Kompakt drucken</button>
    <button id="btnPrint" class="btn">Drucken</button>
  </div>

  <!-- Kurzanleitungen -->
  <h3 class="h" style="margin:6px 0 8px">Kurzanleitungen</h3>
  <section class="row">
    <article class="panel">
      <h4>H√§ndehygiene</h4>
      <ul class="muted">
        <li>H√§nde 20‚Äì30 s einseifen, Zwischenr√§ume/Daumen/N√§gel.</li>
        <li>Gr√ºndlich absp√ºlen, Einmalhandtuch benutzen.</li>
        <li>Bei Arbeitswechsel/Toilette/rohem Fleisch immer waschen.</li>
      </ul>
    </article>

    <article class="panel">
      <h4>K√ºhlkette</h4>
      <ul class="muted">
        <li>Eingangstemperatur messen und dokumentieren.</li>
        <li>Sofort einlagern, T√ºren nicht offen stehen lassen.</li>
        <li>FIFO beachten (zuerst ablaufende Ware zuerst).</li>
      </ul>
    </article>

    <article class="panel">
      <h4>Reinigung</h4>
      <ul class="muted">
        <li>Von sauber ‚Üí schmutzig; farbcodierte T√ºcher verwenden.</li>
        <li>Dosierung &amp; Einwirkzeit lt. Etikett; Klarsp√ºltemp. pr√ºfen.</li>
        <li>Checkliste t√§glich abhaken, Abweichungen melden.</li>
      </ul>
    </article>
  </section>

  <!-- Bildliche Anleitungen -->
  <h3 class="h" style="margin:18px 0 8px">Bildliche Anleitungen</h3>
  <section class="row">
    <article class="panel">
      <h4>H√§nde waschen (5 Schritte)</h4>
      <ol class="muted" style="margin-top:6px">
        <li>Nass machen</li>
        <li>Einseifen (auch Zwischenr√§ume/Daumen/N√§gel)</li>
        <li>Reiben (20‚Äì30 s)</li>
        <li>Absp√ºlen</li>
        <li>Trocknen</li>
      </ol>
    </article>

    <article class="panel">
      <h4>Backstation aufheizen</h4>
      <ol class="muted" style="margin-top:6px">
        <li>Ofen einschalten</li>
        <li>Auf <strong>180&nbsp;¬∞C</strong> einstellen</li>
        <li>Vorlaufzeit beachten</li>
      </ol>
    </article>
  </section>
</main>

<footer class="footer">BUNCA HACCP ¬∑ Anleitung</footer>

<!-- same scripts as Historie -->
<script src="./js/api.js"></script>
<script src="./js/ui.js"></script>
<script>
(async function () {
  // Ensure logged in (same pattern as Historie)
  if (!API.token()) {
    const e = prompt('E-Mail:');
    const p = prompt('Passwort:');
    try { await API.login(e, p); } catch (err) { alert('Login fehlgeschlagen'); return; }
  }

  // Show current shop name (keeps page in sync with selector/localStorage)
  function syncShopName() {
    const s = API.getShop();
    const el = document.getElementById('shopName');
    if (s && el) el.textContent = s.name || s.id || '';
  }
  syncShopName();

  // If ui.js emits a shop-change event, keep label synced
  document.addEventListener('bunca:shop-changed', syncShopName);

  // Print handlers (do not affect other pages)
  const btnCompact = document.getElementById('btnCompactPrint');
  const btnPrint = document.getElementById('btnPrint');

  if (btnCompact) {
    btnCompact.addEventListener('click', () => {
      document.body.classList.add('print-compact');
      window.print();
      setTimeout(() => document.body.classList.remove('print-compact'), 300);
    });
  }
  if (btnPrint) {
    btnPrint.addEventListener('click', () => window.print());
  }
})();
</script>
</body>
</html>
